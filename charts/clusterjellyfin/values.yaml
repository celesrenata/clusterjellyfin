# Default values for clusterjellyfin
image:
  jellyfin:
    repository: ghcr.io/celesrenata/clusterjellyfin-main
    tag: latest
    pullPolicy: IfNotPresent
  worker:
    repository: ghcr.io/celesrenata/clusterjellyfin-worker
    tag: latest
    pullPolicy: IfNotPresent

jellyfin:
  # Main Jellyfin instance configuration
  replicas: 1
  resources:
    requests:
      cpu: 1000m
      memory: 2Gi
    limits:
      cpu: 2000m
      memory: 4Gi
  
  # Storage configuration
  storage:
    config:
      size: 10Gi
      storageClass: ""
      accessMode: ReadWriteOnce
    cache:
      size: 50Gi
      storageClass: ""
      accessMode: ReadWriteOnce
    media:
      size: 1Ti
      storageClass: ""
      accessMode: ReadWriteMany

workers:
  # Worker nodes for distributed transcoding
  replicas: 3
  resources:
    requests:
      cpu: 2000m
      memory: 4Gi
    limits:
      cpu: 4000m
      memory: 8Gi
  
  # Node selection for workers (nodes with Intel Arc GPUs)
  nodeSelector:
    enabled: true
    nodes:
      - gremlin-2
      - gremlin-3
  
  # Intel GPU resource requests
  gpu:
    enabled: true
    resource: "gpu.intel.com/i915"
    limit: 1

rffmpeg:
  # rffmpeg configuration
  config:
    logging:
      debug: true
    fallback:
      allow: true
    ssh:
      options: "-i /config/.ssh/id_rsa -o StrictHostKeyChecking=no"

service:
  type: ClusterIP
  port: 8096
  httpsPort: 8920

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: jellyfin.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Security context
securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# Namespace
namespace: jellyfin
